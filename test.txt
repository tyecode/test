#Install SSH

sudo yum –y install openssh-server openssh-clients

sudo systemctl start sshd
sudo systemctl enable sshd

#Config Location: sudo vim /etc/ssh/sshd_config

###################################################################

#Install FTP Server

sudo yum –y install vsftpd

######################################################################

#Install Webserver

sudo yum install -y epel-release httpd phpmyadmin php iptables-services

----------------------------------------------------------------
sudo vim /etc/sysconfig/iptables

-A INPUT -m state --state NEW -p tcp --dport 80 -j ACCEPT
-A INPUT -m state --state NEW -p tcp --dport 443 -j ACCEPT
-----------------------------------------------------------------
sudo vim /etc/httpd/conf.d/phpMyAdmin.conf

<Directory /usr/share/phpMyAdmin/>
   AddDefaultCharset UTF-8

   <IfModule mod_authz_core.c>
     # Apache 2.4
     <RequireAny>
       #Require ip 127.0.0.1
       #Require ip ::1
        Require all granted
     </RequireAny>
   </IfModule>
   <IfModule !mod_authz_core.c>
     # Apache 2.2
     Order Deny,Allow
     #Deny from All
     #Allow from 127.0.0.1
     #Allow from ::1
        Allow from all
   </IfModule>
</Directory>
-----------------------------------------------------------------
vim /etc/httpd/conf/httpd.conf

- Listen 80
- DocumentRoot "/var/www/html"
------------------------------------------------------------------
systemctl start iptables.service
systemctl start httpd.service

###########################################################################

#Install DNS-Server

Change Hostname to ns1
-----------------------------------------------------------------------------
vim /etc/hosts

-192.168.43.12   ns1.netzone.come ns1 //add on seccond line 
-------------------------------------------------------------------------------
sudo yum install -y bind bind-utils

------------------------------------------------------------------------------
vim /etc/selinux/config

-SELINUX=disabled
------------------------------------------------------------------------------
systemctl disable firewalld
reboot
------------------------------------------------------------------------------
vim /etc/named.conf

listen-on port 53 { 127.0.0.1; 192.168.43.12; };
        #listen-on-v6 port 53 { ::1; };
        directory       "/var/named";
        dump-file       "/var/named/data/cache_dump.db";
        statistics-file "/var/named/data/named_stats.txt";
        memstatistics-file "/var/named/data/named_mem_stats.txt";
        recursing-file  "/var/named/data/named.recursing";
        secroots-file   "/var/named/data/named.secroots";
        allow-query     { localhost; 192.168.43.0/24; };


#add zone on the bottom

zone "netzone.com" IN {
        type master
        file "/var/named/master/fw.zone";
};

zone "43.168.192.in.addr.arpa" IN {
        type master
        file "/var/named/master/rw.zone";
};

------------------------------------------------------------------------------------
named-checkconf /etc/named.conf  // check if nothing is ok
mkdir /var/named/master
chown named:named /var/named/master
-------------------------------------------------------------------------------------
vim /var/named/master/fw.zone

$TTL    604800
@       IN      SOA     ns1.netzone.com. root.netzone.com. (
                  3     ; Serial
             604800     ; Refresh
              86400     ; Retry
            2419200     ; Expire
             604800 )   ; Negative Cache TTL
;
; name servers - NS records
        IN      NS      ns1.netzone.com.

; name servers - A records
netzone.com.            IN      A       192.168.43.12
ns1                     IN      A       192.168.43.12

; host - A records
winxp                   IN      A       192.168.43.77

---------------------------------------------------------------------------------------
vim /var/named/master/rw.zone

$TTL    604800
@       IN      SOA     ns1.netzone.com. root.netzone.com. (
                  3     ; Serial
             604800     ; Refresh
              86400     ; Retry
            2419200     ; Expire
             604800 )   ; Negative Cache TTL
;
; name servers
        IN      NS      ns1.netzone.com.

; PTR records
12              IN      PTR     ns1
77              IN      PTR     winxp

-------------------------------------------------------------------------------------------
named-checkzone netzone.com /var/named/master/fw.zone  			//check fw.zone
named-checkzone 43.168.192.in-addr.arpa /var/named/master/rw.zone  	//Check rw.zone

-----------------------------------------------------------------------------------------------
vim /etc/resolv.conf

# Generated by NetworkManager
nameserver 192.168.43.12
domain  netzone.com
search  netzone.com

-----------------------------------------------------------------------------------------------
/etc/init.d/network restart
systemctl restart named.service

#if unreach
sestatus
systemctl status firewalld
-------------------------------------------------
vim /etc/sysconfig/named

OPTIONS="-4"	//add to bottom line

----------------------------------------------
systemctl restart named.service

#check dns
host -l netzone.com
nslookup netzone.com
nslookup winxp


